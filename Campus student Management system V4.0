import datetime

class AttendanceRecord:
    def __init__(self, student_id, attendance_time, attendance_status, location=None):
        self.student_id = student_id
        self.attendance_time = attendance_time
        self.attendance_status = attendance_status
        self.location = location  

class StudentBehaviorManagement:
    def __init__(self):
        self.student_incidents = {}
        self.attendance_records = []  

    def record_incident(self, student_id, incident):
        if student_id not in self.student_incidents:
            self.student_incidents[student_id] = []
        self.student_incidents[student_id].append(incident)

    def view_student_incidents(self, student_id):
        if student_id in self.student_incidents:
            print(f"Behavior incidents for student with ID {student_id}:")
            for incident in self.student_incidents[student_id]:
                print(f"Description: {incident.description}, Severity: {incident.severity}")
        else:
            print(f"Student with ID {student_id} not found.")

    def record_attendance(self, student_id, attendance_status, location=None):
        
        current_time = datetime.datetime.now()
        attendance_record = AttendanceRecord(student_id, current_time, attendance_status, location)
        self.attendance_records.append(attendance_record)
        print(f"Attendance recorded for student with ID {student_id} at {current_time}. Status: {attendance_status}")

    def view_student_attendance(self, student_id):
        student_attendance = [record for record in self.attendance_records if record.student_id == student_id]
        if student_attendance:
            print(f"Attendance records for student with ID {student_id}:")
            for record in student_attendance:
                print(f"Time: {record.attendance_time}, Status: {record.attendance_status}, Location: {record.location}")
        else:
            print(f"No attendance records found for student with ID {student_id}.")

    def view_attendance_summary(self):
        
        attendance_by_date = {}
        for record in self.attendance_records:
            date_str = record.attendance_time.strftime('%Y-%m-%d')
            if date_str not in attendance_by_date:
                attendance_by_date[date_str] = {}
            if record.attendance_status not in attendance_by_date[date_str]:
                attendance_by_date[date_str][record.attendance_status] = 1
            else:
                attendance_by_date[date_str][record.attendance_status] += 1

        print("Attendance Summary:")
        for date, status_counts in attendance_by_date.items():
            print(f"Date: {date}")
            for status, count in status_counts.items():
                print(f"{status}: {count} students")
